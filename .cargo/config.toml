[alias]
xtask = "run --package xtask --"

[build]
# Uncomment for faster builds with shared generics
# rustflags = ["-Zshare-generics=y"]

# Performance optimizations: native CPU + mold linker
[target.x86_64-unknown-linux-gnu]
linker = "clang"
rustflags = ["-C", "target-cpu=native", "-C", "link-arg=-fuse-ld=mold"]

[target.aarch64-unknown-linux-gnu]
rustflags = ["-C", "target-cpu=native"]

[target.x86_64-apple-darwin]
rustflags = ["-C", "target-cpu=native"]

[target.aarch64-apple-darwin]
rustflags = ["-C", "target-cpu=native"]

# ===== Kellnr Registry Proxy =====
[registries.kellnr]
index = "sparse+https://crates.lan/api/v1/crates/"

[source.crates-io]
replace-with = "kellnr-proxy"

[source.kellnr-proxy]
registry = "sparse+https://crates.lan/api/v1/cratesio/"

# SSL certificate for local registry (self-signed SmartPi CA)
[http]
cainfo = "/Users/omarsobh/.cargo/certs/smartpi-ca.pem"
